<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏•‡∏Ç</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<style>
body { 
  font-family: 'Roboto', sans-serif; 
  text-align: center; 
  margin: 0; 
  padding: 10px;
  overflow: hidden;
  position: relative;
  min-height: 100vh;
}

body::before {
  content: '';
  position: fixed;
  top: 0; 
  left: 0; 
  right: 0; 
  bottom: 0;
  background: linear-gradient(to bottom, #ebd09e 0%, #251f03 100%);
  z-index: -1;
}

.question-container {
  background: white;
  padding: 20px;
  border-radius: 20px;
  max-width: 800px;
  margin: 10px auto;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  position: relative;
  z-index: 5;
}

.question-text {
  font-size: clamp(1.5rem, 4vw, 2.5rem);
  font-weight: 700;
  color: #333;
  margin: 0;
}

.answer-item { 
  position: absolute;
  background: linear-gradient(180deg, #f8f6f0 0%, #fffef8 45%, #fff8e8 55%, #f5f0e5 100%);
  border: 6px solid #74640a;
  border-radius: 20px;
  padding: 20px;
  font-size: clamp(1.5rem, 3vw, 2rem);
  font-weight: 700;
  cursor: grab;
  user-select: none;
  touch-action: none;
  transition: transform 0.1s;
  box-shadow: 1px 1px 0 #000, -8px 6px #3b3305, 0 0 20px rgba(255,230,160,0.55);
  min-width: 100px;
  text-align: center;
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
}

.answer-item:active {
  cursor: grabbing;
}

.particle { 
  position: absolute; 
  font-size: 16px; 
  opacity: 1; 
  pointer-events: none; 
  animation: fadeOut 0.6s ease-out forwards; 
}

@keyframes fadeOut { 
  to { transform: translateY(-20px) scale(0.5); opacity: 0; } 
}

#zones { 
  display: flex; 
  justify-content: space-around; 
  margin-top: 20px;
  position: relative;
  z-index: 5;
}

.zone { 
  width: 40%; 
  height: 150px; 
  border: 2px dashed #333; 
  border-radius: 10px; 
  line-height: 150px; 
  font-size: 20px; 
  color: #333;
}

/* Popup */
#scorePopup {
  display:none;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:#fff;
  border:2px solid #333;
  padding:30px;
  font-size:24px;
  z-index:999;
  border-radius:10px;
  box-shadow:0 0 15px rgba(0,0,0,0.5);
}

/* Neon Button Style */
.neon-btn {
  background: linear-gradient(180deg, #f8f6f0 0%, #fffef8 45%, #fff8e8 55%, #f5f0e5 100%);
  color: #000000;
  border: 6px solid #74640a;
  border-radius: 9999px;
  box-shadow: 1px 1px 0 #000, -8px 6px #3b3305, 0 0 20px rgba(255,230,160,0.55);
  font-weight: 700;
  font-size: clamp(1rem, 2vw, 1.5rem);
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3), 0 -1px 0 rgba(0, 0, 0, 0.1);
  position: relative;
  padding: clamp(14px, 2.5vw, 20px) clamp(35px, 5vw, 50px);
  transform: translateZ(0);
  transition: all 0.3s ease;
  z-index: 10;
  min-height: 55px;
  cursor: pointer;
}

.neon-btn:hover {
  transform: translateY(-2px);
  box-shadow: 2px 2px 0 #000, -10px 8px #3b3305, 0 0 25px rgba(255,230,160,0.75);
}

#scorePopup button { font-size: 18px; padding: 6px 12px; margin-top: 10px; cursor: pointer; }

/* Feedback Overlay */
#feedbackOverlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  z-index: 999;
  justify-content: center;
  align-items: center;
}

#feedbackMessage {
  font-size: 120px;
  font-weight: 900;
  animation: feedbackPop 0.8s ease-out;
  text-shadow: 0 0 30px currentColor;
}

@keyframes feedbackPop {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}
</style>
</head>
<body>

<!-- Feedback Overlay -->
<div id="feedbackOverlay">
  <div id="feedbackMessage"></div>
</div>

<h2>‡∏™‡∏≤‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ: <span id="topicName"></span></h2>

<div id="gameContainer">
  <div class="question-container">
    <div class="question-text" id="questionText"></div>
  </div>

  <div id="zones">
    <div id="correctZone" class="zone">‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á</div>
  </div>
  
  <p id="scoreDisplay">Score: <span id="score">0</span></p>
</div>

<!-- Popup -->
<div id="scorePopup">
  <p style="font-size:20px; font-weight:600; margin-bottom:8px; color:#555;">‡∏™‡∏≤‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ: <span id="topicDisplay"></span></p>
  <p style="font-size:24px; font-weight:600; margin-bottom:10px; color:#666;">‡∏ä‡∏∑‡πà‡∏≠: <span id="playerNameDisplay"></span></p>
  <p style="font-size:14px; margin-bottom:15px; color:#888;">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà <span id="playCountDisplay">1</span></p>
  <p id="resultMessage" style="font-size:28px; font-weight:700; margin-bottom:15px;"></p>
  <p>üéâ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="finalScore"></span> üéâ</p>
  <div style="display:flex; gap:10px; justify-content:center; margin-top:15px; flex-wrap:wrap;">
    <button class="neon-btn" onclick="playAgain()" style="font-size:24px; padding:12px 14px; min-height:48px; width:48px; display:flex; align-items:center; justify-content:center; background:#57e167; border:none;" title="‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á">üîÅ</button>
    <button class="neon-btn" onclick="shareScore()" style="font-size:24px; padding:12px 14px; min-height:48px; width:48px; display:flex; align-items:center; justify-content:center; background:#3498db; border:none;" title="‡πÅ‡∏ä‡∏£‡πå">üîó</button>
    <button class="neon-btn" onclick="exportToPDF()" style="font-size:24px; padding:12px 14px; min-height:48px; width:48px; display:flex; align-items:center; justify-content:center; background:#f39c12; border:none;" title="Export PDF">üìÑ</button>
    <button class="neon-btn" onclick="closePopup()" style="font-size:24px; padding:12px 14px; min-height:48px; width:48px; display:flex; align-items:center; justify-content:center; background:#e74c3c; border:none;" title="‡∏õ‡∏¥‡∏î">‚úï</button>
  </div>
</div>

<script>
let audioCtx, baseFreq = 200;
const sparkleChars = ['‚ú®', 'üåü', 'üí´', '‚≠ê'];
let createdAnswers = {};
let score = 0;
let gameStarted = false;
let currentQuestionIndex = 0;
let allQuestions = [];
let playCount = 1; // ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô

// ‡πÇ‡∏´‡∏•‡∏î config ‡∏à‡∏≤‡∏Å localStorage
let teacherConfig = JSON.parse(localStorage.getItem('emojiGameConfig') || '{}');
document.getElementById('topicName').innerText = teacherConfig.topic || 'Unknown';

// ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö
if (teacherConfig.questions && teacherConfig.questions.length > 0) {
  allQuestions = [...teacherConfig.questions];
  // ‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå
  allQuestions.sort(() => Math.random() - 0.5);
}

// ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
document.getElementById('gameContainer').style.display = 'block';
gameStarted = true;

// ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏£‡∏π


// ‡πÅ‡∏™‡∏î‡∏á feedback ‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î
function showFeedback(isCorrect) {
  const overlay = document.getElementById('feedbackOverlay');
  const message = document.getElementById('feedbackMessage');
  
  if (isCorrect) {
    message.innerText = '‚úÖ';
    message.style.color = '#4CAF50';
  } else {
    message.innerText = '‚ùå';
    message.style.color = '#f44336';
  }
  
  overlay.style.display = 'flex';
  
  setTimeout(() => {
    overlay.style.display = 'none';
  }, 800);
}


// particle effect
function createParticle(x, y) {
  const p = document.createElement('div');
  p.className = 'particle';
  p.innerText = sparkleChars[Math.floor(Math.random() * sparkleChars.length)];
  p.style.left = `${x}px`;
  p.style.top = `${y}px`;
  p.style.transform = `scale(${Math.random() * 1.5 + 0.5})`;
  document.body.appendChild(p);
  setTimeout(() => p.remove(), 600);
}

// ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏•‡∏≤‡∏Å
function initAudio() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const s = audioCtx.createBufferSource();
    s.connect(audioCtx.destination);
    s.start();
  }
}

function playSlideTone(freqStart, freqEnd) {
  if (!audioCtx) return;
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = 'sine';
  osc.frequency.setValueAtTime(freqStart, audioCtx.currentTime);
  osc.frequency.linearRampToValueAtTime(freqEnd, audioCtx.currentTime + 0.15);
  gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.2);
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime + 0.2);
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏•‡∏≤‡∏Å‡πÑ‡∏î‡πâ
function createDraggableAnswer(answerText, answerId, isCorrect, optStartX, optStartY) {
  if (createdAnswers[answerId]) return;

  const answerDiv = document.createElement('div');
  answerDiv.classList.add('answer-item');
  answerDiv.textContent = answerText;

  // If provided, use explicit start positions (from loadQuestion layout planner)
  const answerWidth = 120; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö (used for fallback)
  const startX = (typeof optStartX === 'number') ? optStartX : (50 + Math.random() * (window.innerWidth - 200));
  const startY = (typeof optStartY === 'number') ? optStartY : (window.innerHeight - 250); // ‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á 250px

  answerDiv.style.left = `${startX}px`;
  answerDiv.style.top = `${startY}px`;
  answerDiv.style.transform = 'none';

  let offsetX, offsetY;
  
  function dragMove(posX, posY) {
    answerDiv.style.left = `${posX}px`;
    answerDiv.style.top = `${posY}px`;
    createParticle(posX + 50, posY + 50);
    playSlideTone(baseFreq, baseFreq + 400);
    baseFreq = baseFreq >= 800 ? 200 : baseFreq + 50;
  }

  // Desktop
  answerDiv.addEventListener('mousedown', e => {
    initAudio();
    e.preventDefault();
    offsetX = e.clientX - answerDiv.offsetLeft;
    offsetY = e.clientY - answerDiv.offsetTop;
    
    function onMove(e) {
      dragMove(e.clientX - offsetX, e.clientY - offsetY);
    }
    
    function onUp() {
      document.removeEventListener('mousemove', onMove);
      document.removeEventListener('mouseup', onUp);
      checkDrop(answerDiv, answerId, isCorrect);
    }
    
    document.addEventListener('mousemove', onMove);
    document.addEventListener('mouseup', onUp);
  });

  // Mobile
  answerDiv.addEventListener('touchstart', e => {
    initAudio();
    const t = e.touches[0];
    offsetX = t.clientX - answerDiv.offsetLeft;
    offsetY = t.clientY - answerDiv.offsetTop;
  });
  
  answerDiv.addEventListener('touchmove', e => {
    const t = e.touches[0];
    dragMove(t.clientX - offsetX, t.clientY - offsetY);
  });
  
  answerDiv.addEventListener('touchend', e => {
    checkDrop(answerDiv, answerId, isCorrect);
  });

  document.body.appendChild(answerDiv);
  createdAnswers[answerId] = answerDiv;
}

function checkDrop(answerDiv, answerId, isCorrect) {
  const rect = answerDiv.getBoundingClientRect();
  const correctZone = document.getElementById('correctZone').getBoundingClientRect();

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡πÇ‡∏ã‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
  if (rect.left + rect.width / 2 > correctZone.left && rect.left + rect.width / 2 < correctZone.right &&
      rect.top + rect.height / 2 > correctZone.top && rect.top + rect.height / 2 < correctZone.bottom) {
    if (isCorrect) {
      // ‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á = ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÑ‡∏õ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
      showFeedback(true);
      score += 1;
      document.getElementById('score').innerText = score;
      setTimeout(() => nextQuestion(), 800);
    } else {
      // ‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á = ‡∏ú‡∏¥‡∏î! ‡∏™‡∏Ñ‡∏¥‡∏õ‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
      showFeedback(false);
      setTimeout(() => nextQuestion(), 800);
    }
  }
  // ‡∏ñ‡πâ‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ô‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á = ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡πÉ‡∏´‡πâ‡∏•‡∏≤‡∏Å‡πÉ‡∏´‡∏°‡πà
}

// ‡πÑ‡∏õ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
function nextQuestion() {
  // ‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  Object.values(createdAnswers).forEach(div => div.remove());
  createdAnswers = {};
  
  currentQuestionIndex++;
  
  if (currentQuestionIndex >= allQuestions.length) {
    // ‡∏´‡∏°‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏•‡πâ‡∏ß - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (score === allQuestions.length) {
      endGame('üéâ ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠!', '#4CAF50');
    } else {
      endGame('‚úÖ ‡∏à‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°', '#FF9800');
    }
  } else {
    // ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    loadQuestion(currentQuestionIndex);
  }
}

// ‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
function endGame(message, color) {
  document.getElementById('topicDisplay').innerText = teacherConfig.topic || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
  document.getElementById('playerNameDisplay').innerText = teacherConfig.playerName || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠';
  document.getElementById('playCountDisplay').innerText = playCount; // ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á
  document.getElementById('resultMessage').innerText = message;
  document.getElementById('resultMessage').style.color = color;
  document.getElementById('finalScore').innerText = `${score}/${allQuestions.length}`;
  document.getElementById('scorePopup').style.display = 'block';
}

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏ö‡πÄ‡∏Å‡∏° (‡∏Å‡∏£‡∏ì‡∏µ‡∏´‡∏°‡∏î‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö)
function checkEndGame() {
  if (Object.keys(createdAnswers).length === 0) {
    nextQuestion();
  }
}

function closePopup() {
  document.getElementById('scorePopup').style.display = 'none';
}

function shareScore() {
  const date = new Date();
  const dateStr = date.toLocaleDateString('th-TH');
  const timeStr = date.toLocaleTimeString('th-TH');
  const percentageScore = Math.min(100, Math.round((score / allQuestions.length) * 100));
  
  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
  let grade = '';
  if (percentageScore >= 80) {
    grade = '‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°';
  } else if (percentageScore >= 60) {
    grade = '‡∏î‡∏µ';
  } else if (percentageScore >= 40) {
    grade = '‡∏û‡∏≠‡πÉ‡∏à';
  } else {
    grade = '‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á';
  }
  
  const opt = {
    margin: [12, 12, 12, 12],
    filename: `${teacherConfig.topic || 'score'}_${date.toISOString().split('T')[0]}.pdf`,
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4' }
  };

  const pdfContent = `
    <div style="font-family: 'Arial', sans-serif; color: #333;">
      <!-- Header with Logo Style -->
      <div style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <h1 style="margin: 5px 0; font-size: 24px;">üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h1>
        <p style="margin: 5px 0; font-size: 14px;">Smart Classroom Learning System</p>
      </div>

      <!-- Score Card - Main Focus -->
      <div style="background: #f8f9fa; border: 3px solid #667eea; border-radius: 10px; padding: 20px; margin-bottom: 20px; text-align: center;">
        <p style="font-size: 16px; margin: 0 0 15px 0; color: #555;"><strong>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</strong></p>
        <div style="display: flex; gap: 15px; justify-content: center;">
          <div style="flex: 1; background: white; border-radius: 8px; padding: 15px; border: 2px solid #27ae60;">
            <p style="font-size: 28px; color: #27ae60; font-weight: bold; margin: 0;">${score}/${allQuestions.length}</p>
            <p style="font-size: 12px; color: #666; margin: 5px 0 0 0;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
          </div>
          <div style="flex: 1; background: white; border-radius: 8px; padding: 15px; border: 2px solid #f39c12;">
            <p style="font-size: 28px; color: #f39c12; font-weight: bold; margin: 0;">${grade}</p>
            <p style="font-size: 12px; color: #666; margin: 5px 0 0 0;">‡∏£‡∏∞‡∏î‡∏±‡∏ö</p>
          </div>
        </div>
      </div>

      <!-- Attempt Info -->
      <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 12px; margin-bottom: 20px; border-radius: 4px;">
        <p style="margin: 0; font-size: 14px;"><strong>üìç ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${playCount}</strong> - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô/‡∏ó‡∏î‡∏™‡∏≠‡∏ö</p>
      </div>

      <!-- Course Info -->
      <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
        <p style="font-size: 14px; font-weight: bold; margin: 0 0 10px 0; color: #667eea;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
        <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.week || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏™‡∏≤‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.topic || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.unit || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.teacher || '-'}</td>
          </tr>
        </table>
      </div>

      <!-- Student Info -->
      <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
        <p style="font-size: 14px; font-weight: bold; margin: 0 0 10px 0; color: #667eea;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
        <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.playerName || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${dateStr}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡πÄ‡∏ß‡∏•‡∏≤:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${timeStr}</td>
          </tr>
        </table>
      </div>

      <!-- Footer -->
      <div style="text-align: center; border-top: 2px solid #ddd; padding-top: 15px; margin-top: 20px; color: #999; font-size: 11px;">
        <p style="margin: 5px 0;">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£</p>
        <p style="margin: 5px 0;">Smart Classroom Learning Management System</p>
        <p style="margin: 5px 0; color: #bbb;">üìÑ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ ${date.toISOString()}</p>
      </div>
    </div>
  `;

  const element = document.createElement('div');
  element.innerHTML = pdfContent;
  
  // ‡∏™‡∏£‡πâ‡∏≤‡∏á PDF ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ä‡∏£‡πå
  html2pdf().set(opt).from(element).output('blob').then(blob => {
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á File object
    const file = new File([blob], opt.filename, { type: 'application/pdf' });
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (navigator.canShare && navigator.canShare({ files: [file] })) {
      navigator.share({
        files: [file],
        title: 'Smart Classroom - ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö',
        text: `‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ${score}/${allQuestions.length}`
      }).catch(err => console.log('Error sharing:', err));
    } else {
      // Fallback: ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏ó‡∏ô
      html2pdf().set(opt).from(element).save();
    }
  });
}

function playAgain() {
  // ‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡πÄ‡∏Å‡∏°
  Object.values(createdAnswers).forEach(div => div.remove());
  createdAnswers = {};
  score = 0;
  currentQuestionIndex = 0;
  playCount++; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á
  document.getElementById('score').innerText = score;
  document.getElementById('scorePopup').style.display = 'none';
  
  // ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
  initGame();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Export PDF
function exportToPDF() {
  const date = new Date();
  const dateStr = date.toLocaleDateString('th-TH');
  const timeStr = date.toLocaleTimeString('th-TH');
  const percentageScore = Math.min(100, Math.round((score / allQuestions.length) * 100));
  
  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
  let grade = '';
  if (percentageScore >= 80) {
    grade = '‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°';
  } else if (percentageScore >= 60) {
    grade = '‡∏î‡∏µ';
  } else if (percentageScore >= 40) {
    grade = '‡∏û‡∏≠‡πÉ‡∏à';
  } else {
    grade = '‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á';
  }
  
  const opt = {
    margin: [12, 12, 12, 12],
    filename: `${teacherConfig.topic || 'score'}_${date.toISOString().split('T')[0]}.pdf`,
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4' }
  };

  // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PDF ‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
  const pdfContent = `
    <div style="font-family: 'Arial', sans-serif; color: #333;">
      <!-- Header with Logo Style -->
      <div style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <h1 style="margin: 5px 0; font-size: 24px;"> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h1>
        <p style="margin: 5px 0; font-size: 14px;">Smart Classroom Learning System</p>
      </div>

      <!-- Score Card - Main Focus -->
      <div style="background: #f8f9fa; border: 3px solid #667eea; border-radius: 10px; padding: 20px; margin-bottom: 20px; text-align: center;">
        <p style="font-size: 16px; margin: 0 0 15px 0; color: #555;"><strong>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</strong></p>
        <div style="display: flex; gap: 15px; justify-content: center;">
          <div style="flex: 1; background: white; border-radius: 8px; padding: 15px; border: 2px solid #27ae60;">
            <p style="font-size: 28px; color: #27ae60; font-weight: bold; margin: 0;">${score}/${allQuestions.length}</p>
            <p style="font-size: 12px; color: #666; margin: 5px 0 0 0;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
          </div>
          <div style="flex: 1; background: white; border-radius: 8px; padding: 15px; border: 2px solid #f39c12;">
            <p style="font-size: 28px; color: #f39c12; font-weight: bold; margin: 0;">${grade}</p>
            <p style="font-size: 12px; color: #666; margin: 5px 0 0 0;">‡∏£‡∏∞‡∏î‡∏±‡∏ö</p>
          </div>
        </div>
      </div>

      <!-- Attempt Info -->
      <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 12px; margin-bottom: 20px; border-radius: 4px;">
        <p style="margin: 0; font-size: 14px;"><strong>‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${playCount}</strong> - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô/‡∏ó‡∏î‡∏™‡∏≠‡∏ö</p>
      </div>

      <!-- Course Info -->
      <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
        <p style="font-size: 14px; font-weight: bold; margin: 0 0 10px 0; color: #667eea;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
        <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.week || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏™‡∏≤‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.topic || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.unit || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.teacher || '-'}</td>
          </tr>
        </table>
      </div>

      <!-- Student Info -->
      <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
        <p style="font-size: 14px; font-weight: bold; margin: 0 0 10px 0; color: #667eea;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
        <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${teacherConfig.playerName || '-'}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${dateStr}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%; border-bottom: 1px solid #eee;">‡πÄ‡∏ß‡∏•‡∏≤:</td>
            <td style="padding: 8px; border-bottom: 1px solid #eee;">${timeStr}</td>
          </tr>
        </table>
      </div>

      <!-- Footer -->
      <div style="text-align: center; border-top: 2px solid #ddd; padding-top: 15px; margin-top: 20px; color: #999; font-size: 11px;">
        <p style="margin: 5px 0;">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£</p>
        <p style="margin: 5px 0;">Smart Classroom Learning Management System</p>
        <p style="margin: 5px 0; color: #bbb;">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ ${date.toISOString()}</p>
      </div>

      <!-- Signature Section -->
      <div style="margin-top: 30px; padding: 0 20px; text-align: right;">
        <div style="margin-top: 30px; padding: 0 20px; text-align: right;">
        <p style="margin: 0 0 0 0; font-size: 10px; color: #333;">‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠ ___________________</p>
        <p style="margin: 5px 0 0 0; font-size: 10px; color: #333;">‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö</p>
        <p style="margin: 2px 0 0 0; font-size: 10px; color: #333;">(_____________________)</p>
      </div>
    </div>
  `;

  // ‡πÉ‡∏ä‡πâ html2pdf
  const element2 = document.createElement('div');
  element2.innerHTML = pdfContent;
  html2pdf().set(opt).from(element2).save();
}

// ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå
function loadQuestion(index) {
  if (!allQuestions || allQuestions.length === 0) {
    alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏£‡∏π‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤");
    window.location.href = 'teachermatch.html';
    return;
  }

  const question = allQuestions[index];
  createdAnswers = {};
  
  // ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå
  document.getElementById('questionText').innerText = question.question;

  // ‡∏£‡∏ß‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö
  const allAnswers = [];
  
  question.correctAnswers.forEach((answer, i) => {
    allAnswers.push({ text: answer, id: `correct-${i}`, isCorrect: true });
  });
  
  question.wrongAnswers.forEach((answer, i) => {
    allAnswers.push({ text: answer, id: `wrong-${i}`, isCorrect: false });
  });
  
  // ‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
  allAnswers.sort(() => Math.random() - 0.5);

  // Layout planner: compute non-overlapping start positions for all answers
  const answerWidth = 120;
  const answerHeight = 220; // increased height to provide more vertical space between rows
  const hSpacing = 64; // increased horizontal spacing (doubled) to avoid overlap
  const vSpacing = 40; // vertical spacing between rows (doubled)
  const total = allAnswers.length;

  // available width with small horizontal margins
  const margin = 24;
  const availableWidth = Math.max(200, window.innerWidth - margin * 2);

  // how many columns can fit
  const maxCols = Math.max(1, Math.floor((availableWidth + hSpacing) / (answerWidth + hSpacing)));
  const cols = Math.min(total, maxCols);
  const rows = Math.ceil(total / cols);

  // compute baseX centered for the number of columns
  const rowTotalWidth = cols * answerWidth + (cols - 1) * hSpacing;
  let baseX = (window.innerWidth - rowTotalWidth) / 2;
  baseX = Math.max(margin, baseX);

  // start from lower area but allow multiple rows upwards
  const bottomY = window.innerHeight - 160; // baseline from bottom

  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠ ‡πÇ‡∏î‡∏¢‡∏™‡πà‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡πâ‡∏ß (multi-row)
  allAnswers.forEach((answer, i) => {
    const row = Math.floor(i / cols);
    const col = i % cols;
    const x = baseX + col * (answerWidth + hSpacing);
    const y = bottomY - row * (answerHeight + vSpacing);
    createDraggableAnswer(answer.text, answer.id, answer.isCorrect, x, y);
  });
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏Å‡∏°)
function initGame() {
  if (!allQuestions || allQuestions.length === 0) {
    alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏£‡∏π‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤");
    window.location.href = 'teachermatch.html';
    return;
  }

  score = 0;
  currentQuestionIndex = 0;
  document.getElementById('score').innerText = score;
  
  // ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏£‡∏Å
  loadQuestion(0);
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
initGame();
</script>
</body>
</html>
